# taxonomy.yml
# Customer Personality Analysis - Taxonomy Definitions

taxonomy:
  
  # Product Categories
  product_categories:
    description: "How we classify products for reporting"
    
    beverages:
      wine: 
        column: MntWines
        description: "Wine purchases over 2-year period"
    
    food:
      meat: 
        column: MntMeatProducts
        description: "Meat product purchases"
      fish: 
        column: MntFishProducts
        description: "Fish product purchases"
      fruits: 
        column: MntFruits
        description: "Fruit purchases"
      sweets: 
        column: MntSweetProducts
        description: "Sweet product purchases"
    
    luxury:
      gold_products: 
        column: MntGoldProds
        description: "Premium/luxury gold products"
  
  # Customer Segments by Age (Dynamic)
  customer_age_segments:
    description: "Standardized age brackets for customer analysis"
    
    young_adult:
      definition: "YEAR(CURRENT_DATE) - Year_Birth < 35"
      label: "Young Adult (18-34)"
      description: "Starting careers, building households"
    
    middle_age:
      definition: "YEAR(CURRENT_DATE) - Year_Birth >= 35 AND YEAR(CURRENT_DATE) - Year_Birth < 50"
      label: "Middle Age (35-49)"
      description: "Established careers, family focus"
    
    mature:
      definition: "YEAR(CURRENT_DATE) - Year_Birth >= 50 AND YEAR(CURRENT_DATE) - Year_Birth < 65"
      label: "Mature (50-64)"
      description: "Peak earnings, preparing for retirement"
    
    senior:
      definition: "YEAR(CURRENT_DATE) - Year_Birth >= 65"
      label: "Senior (65+)"
      description: "Retirement age, different spending patterns"
  
  # Family Status
  family_status:
    description: "Customer household composition"
    
    parents:
      definition: "Kidhome > 0 OR Teenhome > 0"
      label: "Parents"
      description: "Has children or teenagers at home"
    
    no_children:
      definition: "Kidhome = 0 AND Teenhome = 0"
      label: "No Children"
      description: "No children at home (may be childless or empty nesters)"
  
  # Customer Value Tiers
  value_tiers:
    description: "Customer segmentation by total spending"
    
    high_value:
      definition: "(MntWines + MntFruits + MntMeatProducts + MntFishProducts + MntSweetProducts + MntGoldProds) > 1000"
      label: "High Value"
      description: "Top spending customers, premium focus"
    
    medium_value:
      definition: "(MntWines + MntFruits + MntMeatProducts + MntFishProducts + MntSweetProducts + MntGoldProds) > 500 AND (MntWines + MntFruits + MntMeatProducts + MntFishProducts + MntSweetProducts + MntGoldProds) <= 1000"
      label: "Medium Value"
      description: "Regular customers, growth opportunity"
    
    low_value:
      definition: "(MntWines + MntFruits + MntMeatProducts + MntFishProducts + MntSweetProducts + MntGoldProds) <= 500"
      label: "Low Value"
      description: "Occasional customers, retention focus"
  
  # Purchase Channels
  purchase_channels:
    description: "Where customers make purchases"
    
    web:
      column: NumWebPurchases
      label: "Web Purchases"
      description: "Number of purchases made through website"
    
    catalog:
      column: NumCatalogPurchases
      label: "Catalog Purchases"
      description: "Number of purchases made through catalog"
    
    store:
      column: NumStorePurchases
      label: "Store Purchases"
      description: "Number of in-store purchases"
  
  # Education Levels
  education_levels:
    description: "Customer education attainment"
    values:
      - "Graduation"
      - "PhD"
      - "Master"
      - "2n Cycle"
      - "Basic"
  
  # Marital Status
  marital_status:
    description: "Customer relationship status"
    values:
      - "Married"
      - "Together"
      - "Single"
      - "Divorced"
      - "Widow"
      - "Alone"
      - "Absurd"
      - "YOLO"

# Campaign Engagement Levels
  campaign_engagement:
    description: "Customer engagement based on campaign acceptance"
    
    highly_engaged:
      definition: "(AcceptedCmp1 + AcceptedCmp2 + AcceptedCmp3 + AcceptedCmp4 + AcceptedCmp5 + Response) >= 4"
      label: "Highly Engaged"
      description: "Accepted 4-6 campaigns, premium customers"
    
    moderately_engaged:
      definition: "(AcceptedCmp1 + AcceptedCmp2 + AcceptedCmp3 + AcceptedCmp4 + AcceptedCmp5 + Response) >= 2 AND (AcceptedCmp1 + AcceptedCmp2 + AcceptedCmp3 + AcceptedCmp4 + AcceptedCmp5 + Response) < 4"
      label: "Moderately Engaged"
      description: "Accepted 2-3 campaigns, growth opportunity"
    
    low_engagement:
      definition: "(AcceptedCmp1 + AcceptedCmp2 + AcceptedCmp3 + AcceptedCmp4 + AcceptedCmp5 + Response) = 1"
      label: "Low Engagement"
      description: "Accepted only 1 campaign, needs nurturing"
    
    no_engagement:
      definition: "(AcceptedCmp1 + AcceptedCmp2 + AcceptedCmp3 + AcceptedCmp4 + AcceptedCmp5 + Response) = 0"
      label: "No Engagement"
      description: "Never accepted campaigns, at-risk segment"

# Metadata
metadata:
  version: "1.0"
  last_updated: "2026-02-10"
  created_by: "Data Engineering Team"
  purpose: "Taxonomy definitions for customer segmentation and product categorization"
  
  data_source: "Customer Personality Analysis (Kaggle)"
  total_customers: 2240
  date_range: "2-year period"
  
  governance:
    data_steward: "Chief Data Officer"
    business_owners:
      - "Marketing Team (customer segments)"
      - "Product Team (product categories)"
      - "Finance Team (value tiers)"
    review_frequency: "Quarterly"
    last_review: "2026-02-10"
    next_review: "2026-05-10"
    change_approval_required: true
  
  change_log:
    - version: "1.0"
      date: "2026-02-10"
      changes: "Initial taxonomy creation with dynamic age calculations"
      author: "Data Engineering Team"
      approved_by: "CDO, VP Marketing, VP Finance"
  
  usage_statistics:
    total_segments_defined: 23
    dynamic_calculations: 4  # age segments
    static_definitions: 19
  
  related_files:
    - "metadata.yml - Column-level documentation"
    - "semantic_layer.yml - Business metric definitions"
  
  contact:
    questions: "data-engineering@company.com"
    changes: "data-governance@company.com"
  
  notes: |
    Calculation Definitions:
    - total_spending = MntWines + MntFruits + MntMeatProducts + 
                       MntFishProducts + MntSweetProducts + MntGoldProds
    - Age calculated dynamically: YEAR(CURRENT_DATE) - Year_Birth
    - Dynamic age ensures segments stay current without manual updates
    
    Data Considerations:
    - Dataset is static snapshot (not real-time)
    - Value tier thresholds based on spending distribution analysis
    - Some marital status values are non-standard ("YOLO", "Absurd")
    - Currency assumed to be USD
    
    Update Guidelines:
    - Any changes to segment definitions require stakeholder approval
    - Historical analysis should use point-in-time snapshots
    - New segments must include: definition, label, description
    - Test impact on existing reports before deploying changes